<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Avakahada Chakra Reference</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tiro+Devanagari+Hindi&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .devanagari {
            font-family: 'Tiro Devanagari Hindi', serif;
        }
        /* Style for table headers */
        th {
            @apply px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-100;
        }
        /* Style for table cells */
        td {
            @apply px-4 py-3 whitespace-nowrap text-sm text-gray-800;
            transition: background-color 0.3s ease;
        }
        /* Add borders to the table */
        table {
            @apply min-w-full divide-y divide-gray-200 border border-gray-200;
        }
        /* Add alternating row colors */
        tbody tr:nth-child(even) {
            @apply bg-gray-50;
        }
        /* Style for highlighted cells */
        .highlight {
            @apply bg-yellow-300 font-bold text-black;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">

    <div class="container mx-auto px-4 py-8 sm:px-6 lg:px-8">
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Avakahada Chakra</h1>
            <p class="mt-3 text-base text-gray-600 max-w-2xl mx-auto">An interactive guide to find your Namakshara (name syllable) from the Avakahada Chakra.</p>
        </header>

        <!-- Search Section -->
        <section id="search-section" class="max-w-2xl mx-auto mb-10 p-6 bg-white rounded-xl shadow-md">
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="text" id="name-input" placeholder="Enter your name (e.g., Brave World)" class="flex-grow w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button id="find-button" class="w-full sm:w-auto px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors">
                    Find Namakshara
                </button>
            </div>
            <div id="results-display" class="mt-5 text-center text-gray-700"></div>
        </section>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Devanagari Table Section -->
            <section id="devanagari-section">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800 devanagari">अवकहादः चक्र</h2>
                <div class="overflow-x-auto bg-white rounded-lg shadow-md">
                    <table id="devanagari-table" class="min-w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="devanagari">नक्षत्र</th><th class="devanagari">पद 1</th><th class="devanagari">पद 2</th><th class="devanagari">पद 3</th><th class="devanagari">पद 4</th>
                                <th class="devanagari">नक्षत्र</th><th class="devanagari">पद 1</th><th class="devanagari">पद 2</th><th class="devanagari">पद 3</th><th class="devanagari">पद 4</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200 devanagari">
                            <tr>
                                <td>अश्विनी</td><td class="text-center">चु</td><td class="text-center">चे</td><td class="text-center">चो</td><td class="text-center">ल</td>
                                <td>स्वाति</td><td class="text-center">रु</td><td class="text-center">रे</td><td class="text-center">रो</td><td class="text-center">त</td>
                            </tr>
                            <tr>
                                <td>भरणी</td><td class="text-center">लि</td><td class="text-center">लु</td><td class="text-center">ले</td><td class="text-center">लो</td>
                                <td>विशाखा</td><td class="text-center">ति</td><td class="text-center">तु</td><td class="text-center">ते</td><td class="text-center">तो</td>
                            </tr>
                            <tr>
                                <td>कृत्तिका</td><td class="text-center">अ</td><td class="text-center">इ</td><td class="text-center">उ</td><td class="text-center">ए</td>
                                <td>अनुराधा</td><td class="text-center">न</td><td class="text-center">नि</td><td class="text-center">नु</td><td class="text-center">ने</td>
                            </tr>
                            <tr>
                                <td>रोहिणी</td><td class="text-center">ओ</td><td class="text-center">व</td><td class="text-center">वि</td><td class="text-center">वु</td>
                                <td>ज्येष्ठा</td><td class="text-center">नो</td><td class="text-center">य</td><td class="text-center">यि</td><td class="text-center">यु</td>
                            </tr>
                            <tr>
                                <td>मृगशीर्ष</td><td class="text-center">वे</td><td class="text-center">वो</td><td class="text-center">क</td><td class="text-center">कि</td>
                                <td>मूला</td><td class="text-center">य</td><td class="text-center">यो</td><td class="text-center">ब</td><td class="text-center">बि</td>
                            </tr>
                            <tr>
                                <td>आर्द्रा</td><td class="text-center">कु</td><td class="text-center">घ</td><td class="text-center">ङ</td><td class="text-center">छ</td>
                                <td>पूर्वाषाढ़ा</td><td class="text-center">भु</td><td class="text-center">ध</td><td class="text-center">भ</td><td class="text-center">ढ</td>
                            </tr>
                            <tr>
                                <td>पुनर्वसु</td><td class="text-center">के</td><td class="text-center">को</td><td class="text-center">ह</td><td class="text-center">हि</td>
                                <td>उत्तराषाढ़ा</td><td class="text-center">बे</td><td class="text-center">बो</td><td class="text-center">ज</td><td class="text-center">जि</td>
                            </tr>
                            <tr>
                                <td>पुष्य</td><td class="text-center">हु</td><td class="text-center">हे</td><td class="text-center">हो</td><td class="text-center">ड</td>
                                <td>अभिजित्</td><td class="text-center">जु</td><td class="text-center">जे</td><td class="text-center">जो</td><td class="text-center">ख</td>
                            </tr>
                            <tr>
                                <td>आश्लेषा</td><td class="text-center">डि</td><td class="text-center">डु</td><td class="text-center">डे</td><td class="text-center">डो</td>
                                <td>श्रवण</td><td class="text-center">शि</td><td class="text-center">शु</td><td class="text-center">शे</td><td class="text-center">शो</td>
                            </tr>
                            <tr>
                                <td>मघा</td><td class="text-center">म</td><td class="text-center">मि</td><td class="text-center">मु</td><td class="text-center">मे</td>
                                <td>धनिष्ठा</td><td class="text-center">ग</td><td class="text-center">गि</td><td class="text-center">गु</td><td class="text-center">गे</td>
                            </tr>
                             <tr>
                                <td>पू० फाल्गुनी</td><td class="text-center">मो</td><td class="text-center">ट</td><td class="text-center">टि</td><td class="text-center">टु</td>
                                <td>शतभिषा</td><td class="text-center">गो</td><td class="text-center">स</td><td class="text-center">सि</td><td class="text-center">सु</td>
                            </tr>
                            <tr>
                                <td>उ० फाल्गुनी</td><td class="text-center">टे</td><td class="text-center">टो</td><td class="text-center">प</td><td class="text-center">पि</td>
                                <td>पू० भाद्रा</td><td class="text-center">से</td><td class="text-center">सो</td><td class="text-center">द</td><td class="text-center">दि</td>
                            </tr>
                            <tr>
                                <td>हस्त</td><td class="text-center">पु</td><td class="text-center">ष</td><td class="text-center">ण</td><td class="text-center">ठ</td>
                                <td>उ० भाद्रा</td><td class="text-center">दु</td><td class="text-center">थ</td><td class="text-center">झ</td><td class="text-center">ञ</td>
                            </tr>
                            <tr>
                                <td>चित्रा</td><td class="text-center">पे</td><td class="text-center">पो</td><td class="text-center">र</td><td class="text-center">रि</td>
                                <td>रेवती</td><td class="text-center">दे</td><td class="text-center">दो</td><td class="text-center">च</td><td class="text-center">चि</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- English Transliteration Table Section -->
            <section id="english-section">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">English Transliteration</h2>
                <div class="overflow-x-auto bg-white rounded-lg shadow-md">
                    <table id="english-table" class="min-w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th>Nakshatra</th><th>1st Pada</th><th>2nd Pada</th><th>3rd Pada</th><th>4th Pada</th>
                                <th>Nakshatra</th><th>1st Pada</th><th>2nd Pada</th><th>3rd Pada</th><th>4th Pada</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                           <tr>
                                <td>Ashwini</td><td class="text-center">Chu</td><td class="text-center">Che</td><td class="text-center">Cho</td><td class="text-center">La</td>
                                <td>Swati</td><td class="text-center">Ru</td><td class="text-center">Re</td><td class="text-center">Ro</td><td class="text-center">Ta</td>
                            </tr>
                            <tr>
                                <td>Bharani</td><td class="text-center">Li</td><td class="text-center">Lu</td><td class="text-center">Le</td><td class="text-center">Lo</td>
                                <td>Vishakha</td><td class="text-center">Ti</td><td class="text-center">Tu</td><td class="text-center">Te</td><td class="text-center">To</td>
                            </tr>
                            <tr>
                                <td>Krittika</td><td class="text-center">A</td><td class="text-center">I</td><td class="text-center">U</td><td class="text-center">E</td>
                                <td>Anuradha</td><td class="text-center">Na</td><td class="text-center">Ni</td><td class="text-center">Nu</td><td class="text-center">Ne</td>
                            </tr>
                            <tr>
                                <td>Rohini</td><td class="text-center">O</td><td class="text-center">Va</td><td class="text-center">Vi</td><td class="text-center">Vu</td>
                                <td>Jyeshtha</td><td class="text-center">No</td><td class="text-center">Ya</td><td class="text-center">Yi</td><td class="text-center">Yu</td>
                            </tr>
                            <tr>
                                <td>Mrigashirsha</td><td class="text-center">Ve</td><td class="text-center">Vo</td><td class="text-center">Ka</td><td class="text-center">Ki</td>
                                <td>Mula</td><td class="text-center">Ye</td><td class="text-center">Yo</td><td class="text-center">Ba</td><td class="text-center">Bi</td>
                            </tr>
                            <tr>
                                <td>Ardra</td><td class="text-center">Ku</td><td class="text-center">Gha</td><td class="text-center">Nga</td><td class="text-center">Chha</td>
                                <td>Purva Ashadha</td><td class="text-center">Bhu</td><td class="text-center">Dha</td><td class="text-center">Bha</td><td class="text-center">Dha</td>
                            </tr>
                            <tr>
                                <td>Punarvasu</td><td class="text-center">Ke</td><td class="text-center">Ko</td><td class="text-center">Ha</td><td class="text-center">Hi</td>
                                <td>Uttara Ashadha</td><td class="text-center">Be</td><td class="text-center">Bo</td><td class="text-center">Ja</td><td class="text-center">Ji</td>
                            </tr>
                            <tr>
                                <td>Pushya</td><td class="text-center">Hu</td><td class="text-center">He</td><td class="text-center">Ho</td><td class="text-center">Da</td>
                                <td>Abhijit</td><td class="text-center">Ju</td><td class="text-center">Je</td><td class="text-center">Jo</td><td class="text-center">Kha</td>
                            </tr>
                            <tr>
                                <td>Ashlesha</td><td class="text-center">Di</td><td class="text-center">Du</td><td class="text-center">De</td><td class="text-center">Do</td>
                                <td>Shravana</td><td class="text-center">Shi</td><td class="text-center">Shu</td><td class="text-center">She</td><td class="text-center">Sho</td>
                            </tr>
                            <tr>
                                <td>Magha</td><td class="text-center">Ma</td><td class="text-center">Mi</td><td class="text-center">Mu</td><td class="text-center">Me</td>
                                <td>Dhanishtha</td><td class="text-center">Ga</td><td class="text-center">Gi</td><td class="text-center">Gu</td><td class="text-center">Ge</td>
                            </tr>
                             <tr>
                                <td>Purva Phalguni</td><td class="text-center">Mo</td><td class="text-center">Ta</td><td class="text-center">Ti</td><td class="text-center">Tu</td>
                                <td>Shatabhisha</td><td class="text-center">Go</td><td class="text-center">Sa</td><td class="text-center">Si</td><td class="text-center">Su</td>
                            </tr>
                            <tr>
                                <td>Uttara Phalguni</td><td class="text-center">Te</td><td class="text-center">To</td><td class="text-center">Pa</td><td class="text-center">Pi</td>
                                <td>Purva Bhadrapada</td><td class="text-center">Se</td><td class="text-center">So</td><td class="text-center">Da</td><td class="text-center">Di</td>
                            </tr>
                            <tr>
                                <td>Hasta</td><td class="text-center">Pu</td><td class="text-center">Sha</td><td class="text-center">Na</td><td class="text-center">Tha</td>
                                <td>Uttara Bhadrapada</td><td class="text-center">Du</td><td class="text-center">Tha</td><td class="text-center">Jha</td><td class="text-center">Jna</td>
                            </tr>
                            <tr>
                                <td>Chitra</td><td class="text-center">Pe</td><td class="text-center">Po</td><td class="text-center">Ra</td><td class="text-center">Ri</td>
                                <td>Revati</td><td class="text-center">De</td><td class="text-center">Do</td><td class="text-center">Cha</td><td class="text-center">Chi</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 py-4 border-t border-gray-300">
            <p class="text-sm text-gray-500">&copy; 2025 Avakahada Chakra Reference. All Rights Reserved.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to DOM elements
            const nameInput = document.getElementById('name-input');
            const findButton = document.getElementById('find-button');
            const resultsDisplay = document.getElementById('results-display');
            const englishTable = document.getElementById('english-table').querySelector('tbody');
            const devanagariTable = document.getElementById('devanagari-table').querySelector('tbody');

            // --- Create a mapping of all possible padas for efficient lookup ---
            const allPadas = new Set();
            const englishPadaCells = englishTable.querySelectorAll('td:not(:first-child):not(:nth-child(6))'); // Select only pada cells
            englishPadaCells.forEach(cell => {
                allPadas.add(cell.textContent.trim().toLowerCase());
            });

            // --- Transliteration map for phonetic matching ---
            const transliterationMap = {
                'a': ['a', 'i', 'u', 'e', 'o'], 'b': ['ba', 'bi', 'be', 'bo', 'bha', 'bhu'], 'c': ['cha', 'chi', 'chu', 'che', 'cho', 'chha'],
                'ch': ['cha', 'chi', 'chu', 'che', 'cho', 'chha'], 'd': ['da', 'di', 'du', 'de', 'do', 'dha'], 'dh': ['dha', 'dhi', 'dhu', 'dhe', 'dho'],
                'g': ['ga', 'gi', 'gu', 'ge', 'go', 'gha'], 'gh': ['gha', 'ghi', 'ghu', 'ghe', 'gho'], 'h': ['ha', 'hi', 'hu', 'he', 'ho'],
                'j': ['ja', 'ji', 'ju', 'je', 'jo', 'jha', 'jna'], 'k': ['ka', 'ki', 'ku', 'ke', 'ko', 'kha'], 'kh': ['kha', 'khi', 'khu', 'khe', 'kho'],
                'l': ['la', 'li', 'lu', 'le', 'lo'], 'm': ['ma', 'mi', 'mu', 'me', 'mo'], 'n': ['na', 'ni', 'nu', 'ne', 'no', 'nga'],
                'p': ['pa', 'pi', 'pu', 'pe', 'po'], 'ph': ['pha', 'phi', 'phu', 'phe', 'pho'], 'r': ['ra', 'ri', 'ru', 're', 'ro'],
                's': ['sa', 'si', 'su', 'se', 'so'], 'sh': ['sha', 'shi', 'shu', 'she', 'sho'], 't': ['ta', 'ti', 'tu', 'te', 'to', 'tha'],
                'th': ['tha', 'thi', 'thu', 'the', 'tho'], 'v': ['va', 'vi', 'vu', 've', 'vo'], 'w': ['va', 'vi', 'vu', 've', 'vo'],
                'y': ['ya', 'yi', 'yu', 'ye', 'yo'],
            };

            // --- Function to handle the search ---
            const findNamakshara = () => {
                clearHighlights();
                resultsDisplay.innerHTML = '';
                const name = nameInput.value.trim().toLowerCase();
                if (!name) {
                    resultsDisplay.innerHTML = `<p class="text-red-500">Please enter a name.</p>`;
                    return;
                }
                const words = name.split(/\s+/);
                const foundSyllables = new Map();

                words.forEach(word => {
                    if (!word) return;
                    let matchFound = false;
                    
                    // Priority 1: Direct Match (e.g., "che" in "chetan")
                    for (let len = 4; len >= 2 && !matchFound; len--) {
                        if (word.length >= len) {
                            const syllable = word.substring(0, len);
                            if (allPadas.has(syllable)) {
                                if (!foundSyllables.has(syllable)) {
                                    foundSyllables.set(syllable, { word: word });
                                }
                                matchFound = true;
                            }
                        }
                    }
                    
                    if (matchFound) {
                        return; // Found a direct match, so skip phonetic search for this word
                    }

                    // Priority 2: Phonetic Mapping if no direct match was found
                    let startingSound = (word.length >= 2 && transliterationMap[word.substring(0, 2)]) ? word.substring(0, 2) : word.substring(0, 1);
                    const possiblePadas = transliterationMap[startingSound];
                    if (possiblePadas) {
                        // Loop through phonetic possibilities and stop at the FIRST match.
                        for (const pada of possiblePadas) {
                            if (allPadas.has(pada)) {
                                if (!foundSyllables.has(pada)) {
                                    foundSyllables.set(pada, { word: word });
                                }
                                matchFound = true;
                                break; // Stop after finding the first valid phonetic match
                            }
                        }
                    }
                });

                if (foundSyllables.size > 0) {
                    highlightAndDisplay(foundSyllables);
                } else {
                    resultsDisplay.innerHTML = `<p class="text-center text-gray-600">No matching Namakshara found for "${nameInput.value}". Please check the spelling or try a different name.</p>`;
                }
            };

            // --- Function to highlight cells and display detailed results ---
            const highlightAndDisplay = (syllablesMap) => {
                let resultsHTML = '<h3 class="text-lg font-semibold mb-3 text-left">Namaksharas Found:</h3><div class="space-y-3">';
                const alreadyDisplayed = new Set(); // Use a unique key to track displayed results

                englishTable.querySelectorAll('tr').forEach((row, rowIndex) => {
                    row.querySelectorAll('td').forEach((cell, cellIndex) => {
                        const cellText = cell.textContent.trim().toLowerCase();
                        if (syllablesMap.has(cellText)) {
                            // Extract info
                            const isLeftHalf = cellIndex > 0 && cellIndex < 5;
                            const nakshatraCellIndex = isLeftHalf ? 0 : 5;
                            const padaNumber = isLeftHalf ? cellIndex : cellIndex - 5;
                            const nakshatraName = row.cells[nakshatraCellIndex].textContent;
                            
                            // Create a unique key for this result (e.g., "da-Pushya") to handle cases like two 'Da's
                            const uniqueKey = `${cellText}-${nakshatraName}`;

                            // Check if this unique result has been displayed
                            if (!alreadyDisplayed.has(uniqueKey)) {
                                // Highlight cells
                                cell.classList.add('highlight');
                                const devanagariCell = devanagariTable.rows[rowIndex].cells[cellIndex];
                                if (devanagariCell) {
                                    devanagariCell.classList.add('highlight');
                                }
                                
                                const devanagariNakshatraName = devanagariTable.rows[rowIndex].cells[nakshatraCellIndex].textContent;

                                // Build HTML for this result card
                                resultsHTML += `
                                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-left shadow-sm">
                                        <p class="text-base font-bold text-blue-700 flex items-center gap-3">
                                            <span>${capitalize(cellText)}</span>
                                            <span class="devanagari text-2xl">${devanagariCell.textContent}</span>
                                        </p>
                                        <div class="mt-2 pt-2 border-t border-gray-200 text-sm text-gray-700 space-y-1">
                                            <p>
                                                <span class="font-semibold text-gray-500 w-20 inline-block">Nakshatra:</span> ${nakshatraName} (<span class="devanagari">${devanagariNakshatraName}</span>)
                                            </p>
                                            <p>
                                                <span class="font-semibold text-gray-500 w-20 inline-block">Pada:</span> ${padaNumber}
                                            </p>
                                        </div>
                                    </div>
                                `;
                                
                                // Add the unique key to the set to prevent duplicates
                                alreadyDisplayed.add(uniqueKey);
                            }
                        }
                    });
                });
                resultsHTML += '</div>';
                resultsDisplay.innerHTML = resultsHTML;
            };

            // --- Helper function to clear highlights from all table cells ---
            const clearHighlights = () => {
                document.querySelectorAll('.highlight').forEach(cell => {
                    cell.classList.remove('highlight');
                });
            };

            // --- Helper function to capitalize the first letter ---
            const capitalize = (s) => s.charAt(0).toUpperCase() + s.slice(1);

            // --- Event Listeners ---
            findButton.addEventListener('click', findNamakshara);
            nameInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    findNamakshara();
                }
            });
        });
    </script>
</body>
</html>
